/* 
Copyright (C) 2010 Glenn Jones. All Rights Reserved.
License: http://microformatshiv.com/license/
*/
function dateFromISO8601(string){var dateArray=string.match(/(\d\d\d\d)(?:-?(\d\d[\d]*)(?:-?([\d]*)(?:[T ](\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(?:Z|(?:([-+])(\d\d)(?::?(\d\d))?)?)?)?)?)?/);if(dateArray[2]&&!dateArray[3]){var d=new Date("01/01/"+dateArray[1]);d.setDate(dateArray[2]);dateArray[2]=d.getMonth()+1;dateArray[3]=d.getDate()}var date=new Date(dateArray[1],0,1);date.time=false;if(dateArray[2]){date.setMonth(dateArray[2]-1)}if(dateArray[3]){date.setDate(dateArray[3])}if(dateArray[4]){date.setHours(dateArray[4]);date.time=true;if(dateArray[5]){date.setMinutes(dateArray[5]);if(dateArray[6]){date.setSeconds(dateArray[6]);if(dateArray[7]){date.setMilliseconds(Number("0."+dateArray[7])*1000)}}}}if(dateArray[8]){if(dateArray[8]=="-"){if(dateArray[9]&&dateArray[10]){date.setHours(date.getHours()+parseInt(dateArray[9],10));date.setMinutes(date.getMinutes()+parseInt(dateArray[10],10))}}else{if(dateArray[8]=="+"){if(dateArray[9]&&dateArray[10]){date.setHours(date.getHours()-parseInt(dateArray[9],10));date.setMinutes(date.getMinutes()-parseInt(dateArray[10],10))}}}if(dateArray[8]){var tzOffset=date.getTimezoneOffset();if(tzOffset<0){date.setMinutes(date.getMinutes()+tzOffset)}else{if(tzOffset>0){date.setMinutes(date.getMinutes()-tzOffset)}}}}return date}function iso8601FromDate(date,punctuation){var string=date.getFullYear().toString();if(punctuation){string+="-"}string+=(date.getMonth()+1).toString().replace(/\b(\d)\b/g,"0$1");if(punctuation){string+="-"}string+=date.getDate().toString().replace(/\b(\d)\b/g,"0$1");if(date.time){string+="T";string+=date.getHours().toString().replace(/\b(\d)\b/g,"0$1");if(punctuation){string+=":"}string+=date.getMinutes().toString().replace(/\b(\d)\b/g,"0$1");if(punctuation){string+=":"}string+=date.getSeconds().toString().replace(/\b(\d)\b/g,"0$1");if(date.getMilliseconds()>0){if(punctuation){string+="."}string+=date.getMilliseconds().toString()}}return string};